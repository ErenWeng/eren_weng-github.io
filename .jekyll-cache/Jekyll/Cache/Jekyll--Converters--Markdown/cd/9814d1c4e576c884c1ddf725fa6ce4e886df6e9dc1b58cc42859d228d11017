I"#<p>å‰›é–‹å§‹çœ‹åˆ°ç¬¦è™Ÿæ™‚ï¼Œå¯èƒ½æœƒçŒœæ¸¬é€™æ˜¯ä»€éº¼æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„è®Šæ•¸å—ï¼Ÿæˆ–ç¶“éè®Šç•°çš„å­—ä¸²ï¼Ÿåˆæˆ–æ˜¯ä»€éº¼ç¥å¥‡çš„Rubyé»‘é­”æ³•å‘¢ï¼Ÿ</p>

<p>Anywayï¼ŒRTFM firstã€‚</p>

<hr />

<h2 id="åœ¨rubyçš„ä¸–ç•Œä¸­ç¬¦è™Ÿæ˜¯ä»€éº¼-what-is-a-symbol-in-rubys-world">åœ¨Rubyçš„ä¸–ç•Œä¸­ç¬¦è™Ÿæ˜¯ä»€éº¼ï¼Ÿ What is a Symbol in Rubyâ€™s world?</h2>

<blockquote>
  <p>Symbol objects represent names inside the Ruby interpreter. They are generated using the :name and :â€stringâ€ literals syntaxâ€¦â€¦ . The same Symbol object will be created for a given name or string for the duration of a programâ€™s execution, regardless of the context or meaning of that name. â€¦â€¦<a href="https://ruby-doc.org/core-2.7.0/Symbol.html">ruby-doc</a></p>
</blockquote>

<p>åœ¨Rubyçš„ä¸–ç•Œè£¡ï¼ŒSymbolçš„èªæ³•æ˜¯ä½¿ç”¨å†’è™ŸåŠ ä¸ŠæŸå€‹çµ¦å®šçš„ :åå­— æˆ–æ˜¯ :â€å­—ä¸²â€ ã€‚ç„¶è€ŒRubyä¸¦ä¸åœ¨ä¹å¾Œé¢çš„åç¨±æ„ç¾©ï¼Œåªæ˜¯åœ¨å‰µå»ºè©² Symbol é€™å€‹ç‰©ä»¶æ™‚é™„å¸¶ä¸Šé‚£å€‹è¢«çµ¦å®šçš„å‘½åã€‚</p>

<blockquote>
  <p>A symbol looks like a variable name but itâ€™s prefixed with a colon. â€¦â€¦You donâ€™t have to pre-declare a symbol and they are guaranteed to be unique. Thereâ€™s no need to assign some kind of value to a symbolâ€¦ . Ruby also guarantees that no matter where it appears in your program, a particular symbol will have the same value.
<br />
A symbol is the most basic Ruby object you can create. Itâ€™s just a name and an internal ID. Symbols are useful because a given symbol name refers to the same object throughout a Ruby program. â€¦â€¦you can consider the colon to mean â€œthing namedâ€ so :id is â€œthe thing named id.â€
<a href="http://rubylearning.com/satishtalim/ruby_symbols.html">rubylearning</a></p>
</blockquote>

<p>Symbolçœ‹èµ·ä¾†åƒæ˜¯è®Šæ•¸åŠ ä¸Šå†’è™Ÿ(ä¸æ˜¯çµè…¸â€¦)ï¼Œä½†ä¸åŒçš„æ˜¯Symbolä¸éœ€è¦è¢«å®šç¾©æˆ–çµ¦å®šä¸€å€‹å€¼æ‰èƒ½ä½¿ç”¨ï¼Œä¸¦ä¸”ä¸ç®¡Symbolåœ¨å“ªéƒ½æœƒæœ‰ä¸€å€‹ç›¸åŒçš„å…§éƒ¨ IDã€‚ä½ å¯ä»¥å°‡å†’è™Ÿ : è¦–ç‚ºæ˜¯è¢«å‘½åçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ :id å°±æ˜¯ ä¸€å€‹è¢«å‘½åç‚º:idçš„æ±è¥¿ ã€‚</p>

<blockquote>
  <p>Symbols are immutable, â€¦ By immutable I mean that every symbol is unique, and it canâ€™t be changed.
Symbols are not pointer to values, they are values themselves
Symbols are for identity
Symbol GC was introduced in Ruby 2.2 to clean up temporary symbols
[rubyguides][rubyguides]</p>
</blockquote>

<p>Symbolå°±åƒæ˜¯çµ¦äº†è­˜åˆ¥è­‰ä¸€æ¨£ï¼Œä¸èƒ½è¢«æ”¹è®Šï¼Œä¸¦ä¸”æœ¬èº«å°±å¯ä»¥æ˜¯ä¸€å€‹å€¼ã€‚Ruby åœ¨2.2 ä¹‹å¾ŒåŠ å…¥äº† Symbol GC(Garbage Collection)ï¼Œ è®“ç¬¦è™Ÿå¯ä»¥åƒå…¶ä»–ç‰©ä»¶ä¸€æ¨£è¢«å›æ”¶è€Œä¸æ˜¯å †ç©åœ¨è¨˜æ†¶é«”ã€‚
çœ‹å®Œé€™äº›è³‡æ–™å¤§è‡´ä¸Šå°±å¯ä»¥äº†è§£ç¬¦è™Ÿçš„ç‰¹æ€§ï¼Œä¸éè‡ªå·±ä¹Ÿè¦ç™¼æ®å¯¦è­‰ç²¾ç¥ï¼ŒTo see is too believe !</p>

<p>1.Symbolæ˜¯ä¸€å€‹ç‰©ä»¶ï¼Ÿ
Rubyåœ¨è™•ç†æ¯å€‹ç‰©ä»¶æ™‚ï¼Œéƒ½æœƒåœ¨è¨˜æ†¶é«”ä¸­ç”¢ç”Ÿä¸€å€‹ç‰©ä»¶çš„object_idï¼Œæ‰€ä»¥åªè¦æ˜¯ç‰©ä»¶éƒ½æœ‰è‡ªå·±ç¨ç‰¹çš„object_idã€‚ä»¥ç¬¦è™Ÿ:catç‚ºä¾‹ï¼Œå¯ä»¥ä½¿ç”¨object_idæ–¹æ³•çœ‹åˆ°æ­¤ç¬¦è™Ÿçš„object_idã€‚</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="ss">:cat</span><span class="p">.</span><span class="nf">object_id</span>
<span class="o">=&gt;</span> <span class="mi">1527388</span>
<span class="p">(</span><span class="err">åŸä¾†æˆ‘åœ¨é›»è…¦è£¡é¤Šäº†ä¸€éš»è­˜åˆ¥è­‰æ˜¯</span><span class="mi">1527388</span><span class="err">çš„ç¬¦è™Ÿè²“å’ª</span><span class="p">)</span></code></pre></figure>

<p>2.Symbolæœ‰ç›¸åŒçš„å…§éƒ¨IDï¼Ÿ
é‡è¤‡ä½¿ç”¨object_idæ–¹æ³•å¯ä»¥çœ‹å‡ºæ¯æ¬¡å–ç”¨:catçš„object_idéƒ½ç›¸åŒï¼Œå°±åƒæ˜¯ä¸€ç›´åœ¨å•:catçš„èº«åˆ†è­‰å­—è™Ÿä¸€æ¨£ï¼ˆä¸åŒçš„æ˜¯èº«åˆ†è­‰å­—è™Ÿæœƒæœ‰äººæ’è™Ÿï¼Œobject_idä¸æœƒï¼‰ï¼Œç›¸å°æ–¼å…¶ä»–çš„ç‰©ä»¶å‰‡æœƒåœ¨æ¯æ¬¡å–ç”¨éƒ½å¾—åˆ°ä¸åŒçš„object_idã€‚</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="ss">:cat</span><span class="p">.</span><span class="nf">object_id</span>
<span class="o">=&gt;</span> <span class="mi">1527388</span>
<span class="ss">:cat</span><span class="p">.</span><span class="nf">object_id</span>
<span class="o">=&gt;</span> <span class="mi">1527388</span>
<span class="s2">"dog"</span><span class="p">.</span><span class="nf">object_id</span>
<span class="o">=&gt;</span> <span class="mi">70368590631340</span>
<span class="s2">"dog"</span><span class="p">.</span><span class="nf">object_id</span>
<span class="o">=&gt;</span> <span class="mi">70368590742760</span>
<span class="p">(</span><span class="err">æ©</span><span class="o">!</span><span class="err">é€™éš»è²“å¾ˆä¹–ä¸æœƒäº‚è·‘</span><span class="p">)</span></code></pre></figure>

<p>3.Symbolä¸ç”¨è¢«æŒ‡å®šå°±å¯å–®ç¨ä½¿ç”¨ï¼Ÿ
å¦‚æœåªä½¿ç”¨ç¬¦è™Ÿ:catï¼Œå°±å¯ä»¥å–®ç¨å¾—åˆ°:catã€‚ä½†å¦‚æœå°‡å­—ä¸²æŒ‡å®šçµ¦ç¬¦è™Ÿæœƒå¾—åˆ° SyntaxError çš„éŒ¯èª¤è¨Šæ¯ï¼Œç¬¦è™Ÿä¸¦ä¸èƒ½åƒè®Šæ•¸ä¸€æ¨£ä½¿ç”¨ã€‚</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="ss">:cat</span>
<span class="o">=&gt;</span> <span class="ss">:cat</span>
<span class="ss">:cat</span> <span class="o">=</span> <span class="s2">"è²“ç³§"</span>
<span class="o">=&gt;</span> <span class="no">SyntaxError</span><span class="p">(</span><span class="n">syntax</span> <span class="n">error</span><span class="p">,</span> <span class="n">unexpect</span> <span class="s1">'='</span><span class="p">,</span> <span class="n">expecting</span> <span class="k">end</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">input</span><span class="p">)</span>
<span class="p">(</span><span class="err">çœ‹ä¾†æ˜¯å› ç‚ºæ²’çµ¦ç½ç½é˜¿</span><span class="o">...</span><span class="p">)</span></code></pre></figure>

<p>4.Symbolä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ
å¦‚æœæŠŠSymbolç•¶ä½œå­—ä¸²ä¾†ä¿®æ”¹æ™‚ï¼Œçµæœæœƒé¡¯ç¤º NoMethodError æ²’æœ‰é€™å€‹æ–¹æ³•çš„éŒ¯èª¤ï¼Œå› ç‚ºSymbol ä¸¦æ²’æœ‰æä¾›ä¿®æ”¹çš„æ–¹æ³•ã€‚ä»¥ä¸‹ç‚ºå˜—è©¦å°‡:catçš„ç¬¬ä¸€å€‹å­—ä½¿ç”¨[]=æ–¹æ³•ä¿®æ”¹ç‚ºpã€‚</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="ss">:cat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="s2">"a"</span>
<span class="ss">:cat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">p</span>
<span class="o">=&gt;</span> <span class="no">NoMethodError</span> <span class="p">(</span><span class="n">undefined</span> <span class="nb">method</span> <span class="sb">`[]=' for :cat:Symbol)
(è²“å’ªä¸å¯ä»¥äº‚æ‹æ‹...)</span></code></pre></figure>

<hr />

<h2 id="ç¬¦è™Ÿå’Œå­—ä¸²æœ‰ä»€éº¼ä¸åŒ-whats-different-between-symbol-and-string">ç¬¦è™Ÿå’Œå­—ä¸²æœ‰ä»€éº¼ä¸åŒï¼Ÿ Whatâ€™s different between Symbol and String?</h2>

<blockquote>
  <p>Symbols are more efficient than strings. Two strings with the same contents are two different objects, but for any given name there is only one Symbol object. This can save both time and memory.
<a href="http://rubylearning.com/satishtalim/ruby_symbols.html">rubylearning</a></p>
</blockquote>

<p>ç¬¦è™Ÿæ¯”è¼ƒæœ‰æ•ˆç‡ä¸”çœè¨˜æ†¶é«”ï¼Œå› ç‚ºæ¯æ¬¡å–ç”¨çš„objectséƒ½ç›¸åŒã€‚</p>

<blockquote>
  <p>Symbols look better, they are immutable &amp; if you benchmark string keys vs symbols keys you will find that string keys are about 1.70x slower.
<a href="https://www.rubyguides.com/2018/02/ruby-symbols/">rubyguides</a></p>
</blockquote>

<p>ç¬¦è™Ÿæ¯”è¼ƒæ£’ï¼Œä»–å€‘æœ‰ä¸å¯è¢«æ”¹è®Šçš„ç‰¹æ€§ï¼Œä¸¦ä¸”åœ¨åŸºæº–æ¸¬è©¦ï¼ˆè©•åƒ¹æ€§èƒ½çš„ä¸€å€‹æ¨™æº–ï¼‰ä¸Šç™¼ç¾å­—ä¸²æ¯”ç¬¦è™Ÿæ…¢äº†1.7å€ã€‚</p>

<blockquote>
  <p>Therefore, when do we use a string versus a symbol?
If the contents (the sequence of characters) of the object are important, use a string
If the identity of the object is important, use a symbol
<a href="http://rubylearning.com/satishtalim/ruby_symbols.html">rubylearning</a></p>
</blockquote>

<p>å¦‚æœç‰©ä»¶çš„å…§å®¹æ˜¯é‡è¦çš„ï¼Œä½¿ç”¨å­—ä¸²
å¦‚æœç‰©ä»¶çš„è­˜åˆ¥æ˜¯é‡è¦çš„ï¼Œä½¿ç”¨ç¬¦è™Ÿ</p>

<p>é™¤äº†é€™å¹¾ç¯‡å…§å®¹é‚„æœ‰ä¸Šè¿°çš„ç¸½çµï¼š
ç¬¦è™Ÿä¸å¯è¢«æ”¹è®Šï¼Œå­—ä¸²å¯ä»¥è¢«æ”¹è®Š
åŒå€‹ç¬¦è™Ÿæ¯æ¬¡å–ç”¨çš„object_idéƒ½ç›¸åŒï¼Œå­—ä¸²å‰‡éƒ½ä¸åŒ
ç¬¦è™Ÿæ•ˆèƒ½æ¯”å­—ä¸²ç•¥å‹ä¸€ç±Œ
å­—ä¸²çš„æ–¹æ³•æ¯”ç¬¦è™Ÿå¤šï¼ˆå» https://ruby-doc.org/çœ‹å°±çŸ¥é“äº†ï¼‰
è¬›é€™éº¼å¤šï¼Œç¬¦è™Ÿåˆ°åº•æ€éº¼ç”¨ï¼Ÿ
å¯ä»¥ä½¿ç”¨åœ¨é›œæ¹Š
å› ç‚ºç¬¦è™Ÿçš„ä¸å¯è®Šï¼Œè®“å…¶å¾ˆé©åˆç•¶ä½œHashä¸­çš„keyï¼ˆå°±åƒä½ é–‹ä¿éšªæ«ƒæ‹¿æ±è¥¿è¦ç”¨åˆ°ç›¸å°æ‡‰çš„é‘°åŒ™ï¼‰ã€‚ç¬¬ä¸‰ç¨®å¯«æ³•æ˜¯æ¯”è¼ƒèªæ„åŒ–çš„æ–¹å¼ï¼Œä¹Ÿæ˜¯ç¾åœ¨è¼ƒå¸¸è¦‹çš„æ–¹å¼ã€‚</p>

<ol>
  <li>å¯ä»¥å’Œå­—ä¸²äº’ç›¸è½‰æ›
ç¬¦è™Ÿ =&gt; å­—ä¸²</li>
</ol>

<p>å­—ä¸² =&gt; ç¬¦è™Ÿ</p>

<ol>
  <li>å¯ä»¥åˆ†äº«å†·çŸ¥è­˜
[Ref]https://ithelp.ithome.com.tw/articles/10159660
ç¬¦è™Ÿçš„ä¸‰ç¨®æœç”¨æ–¹å¼</li>
</ol>

<p>å¸è²“çš„ä¸‰ç¨®æ–¹å¼ï¼ˆX
å¦‚æœè¦åœ¨ç¬¦è™Ÿè£¡æ”¾ç©ºæ ¼è¦åŠ ä¸Šå¼•è™Ÿï¼Œä¸ç„¶æœƒå‡ºç¾ SyntaxError èªæ³•éŒ¯èª¤</p>

<p>è³‡æ–™ä¾†æºï¼š
ruby-doc.org/Symbol
rubylearning.com/Ruby_symbols
rubyguides/Ruby-symbols
ç‚ºè‡ªå·±å­¸Ruby on rails æ•¸å­—ã€å­—ä¸²ã€é™£åˆ—ã€ç¯„åœã€é›œæ¹Šã€ç¬¦è™Ÿ
Rubyå¥³å­©(13)ï¼šåˆ°åº•å­—ä¸²è·Ÿç¬¦è™Ÿä»€éº¼æ™‚å€™ä½¿ç”¨æ¯”è¼ƒå¥½ï¼Ÿ</p>

:ET